<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>
    <script>
        const code = new URLSearchParams(window.location.search).get("code");

        fetch("http://localhost:8080/api/auth/oauth/google/exchange", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ code })
        })
            .then(res => res.json())
            .then(data => {
                localStorage.setItem("accessToken", data.accessToken);
                window.location.href = "/index.html";
            })
            .catch(err => {
                alert("Google login failed");
            });
    </script>
</body>

</html>