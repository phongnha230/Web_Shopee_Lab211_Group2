# ğŸš€ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng User API - KhÃ´ng Cáº§n Database

## ğŸ“‹ Tá»•ng Quan

TÃ´i Ä‘Ã£ táº¡o cho báº¡n má»™t há»‡ thá»‘ng quáº£n lÃ½ User **hoÃ n toÃ n khÃ´ng cáº§n database**. Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong bá»™ nhá»› (RAM) cá»§a á»©ng dá»¥ng, ráº¥t phÃ¹ há»£p Ä‘á»ƒ:
- âœ… Test vÃ  phÃ¡t triá»ƒn nhanh
- âœ… Demo chá»©c nÄƒng
- âœ… Há»c táº­p vÃ  thá»­ nghiá»‡m
- âœ… Prototype

## ğŸ—ï¸ Cáº¥u TrÃºc Dá»± Ãn

### 1. Model - User.java
**ÄÆ°á»ng dáº«n:** [User.java](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/src/main/java/com/example/demo/model/User.java)

Äá»‹nh nghÄ©a cáº¥u trÃºc dá»¯ liá»‡u cá»§a User vá»›i cÃ¡c trÆ°á»ng:
- `id` - ID tá»± Ä‘á»™ng tÄƒng
- `username` - TÃªn Ä‘Äƒng nháº­p
- `email` - Email
- `fullName` - Há» vÃ  tÃªn Ä‘áº§y Ä‘á»§
- `phone` - Sá»‘ Ä‘iá»‡n thoáº¡i

### 2. Service - UserService.java
**ÄÆ°á»ng dáº«n:** [UserService.java](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/src/main/java/com/example/demo/service/UserService.java)

Quáº£n lÃ½ logic nghiá»‡p vá»¥ vÃ  lÆ°u trá»¯ dá»¯ liá»‡u trong bá»™ nhá»›:
- Sá»­ dá»¥ng `ArrayList<User>` Ä‘á»ƒ lÆ°u trá»¯ users
- Sá»­ dá»¥ng `AtomicLong` Ä‘á»ƒ táº¡o ID tá»± Ä‘á»™ng tÄƒng
- Cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c CRUD Ä‘áº§y Ä‘á»§

### 3. Controller - UserController.java
**ÄÆ°á»ng dáº«n:** [UserController.java](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/src/main/java/com/example/demo/controller/UserController.java)

REST API endpoints vá»›i cÃ¡c chá»©c nÄƒng:
- `POST /api/users` - ThÃªm user má»›i
- `GET /api/users` - Láº¥y táº¥t cáº£ users
- `GET /api/users/{id}` - Láº¥y user theo ID
- `PUT /api/users/{id}` - Cáº­p nháº­t user
- `DELETE /api/users/{id}` - XÃ³a user

### 4. Config - CorsConfig.java
**ÄÆ°á»ng dáº«n:** [CorsConfig.java](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/src/main/java/com/example/demo/config/CorsConfig.java)

Cáº¥u hÃ¬nh CORS Ä‘á»ƒ cho phÃ©p frontend gá»i API tá»« cÃ¡c domain khÃ¡c.

## ğŸ¯ CÃ¡ch Sá»­ Dá»¥ng

### PhÆ°Æ¡ng PhÃ¡p 1: Sá»­ Dá»¥ng Giao Diá»‡n Web (Khuyáº¿n Nghá»‹) â­

1. **Khá»Ÿi Ä‘á»™ng server:**
   ```bash
   cd c:\Users\HPPAVILION\Downloads\Backend\Web_shop
   mvn spring-boot:run
   ```

2. **Má»Ÿ file test HTML:**
   - Má»Ÿ file [test-user-api.html](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/test-user-api.html) báº±ng trÃ¬nh duyá»‡t
   - Hoáº·c double-click vÃ o file

3. **Sá»­ dá»¥ng giao diá»‡n:**
   - â• ThÃªm user má»›i báº±ng form
   - ğŸ” Xem danh sÃ¡ch táº¥t cáº£ users
   - ğŸ” TÃ¬m user theo ID
   - ğŸ—‘ï¸ XÃ³a user theo ID
   - ğŸ¯ Cháº¡y demo Ä‘áº§y Ä‘á»§ (tá»± Ä‘á»™ng thÃªm 3 users máº«u)

### PhÆ°Æ¡ng PhÃ¡p 2: Sá»­ Dá»¥ng PowerShell

```powershell
# ThÃªm user má»›i
Invoke-WebRequest -Uri "http://localhost:8080/api/users" `
    -Method POST `
    -Headers @{"Content-Type"="application/json"} `
    -Body '{"username":"nguyenvana","email":"nguyenvana@gmail.com","fullName":"Nguyen Van A","phone":"0123456789"}' `
    -UseBasicParsing

# Xem táº¥t cáº£ users
Invoke-WebRequest -Uri "http://localhost:8080/api/users" `
    -Method GET `
    -UseBasicParsing | Select-Object -ExpandProperty Content

# Xem user theo ID
Invoke-WebRequest -Uri "http://localhost:8080/api/users/1" `
    -Method GET `
    -UseBasicParsing | Select-Object -ExpandProperty Content

# XÃ³a user
Invoke-WebRequest -Uri "http://localhost:8080/api/users/1" `
    -Method DELETE `
    -UseBasicParsing
```

### PhÆ°Æ¡ng PhÃ¡p 3: Sá»­ Dá»¥ng Postman hoáº·c Thunder Client

1. **ThÃªm User:**
   - Method: `POST`
   - URL: `http://localhost:8080/api/users`
   - Headers: `Content-Type: application/json`
   - Body (raw JSON):
     ```json
     {
       "username": "nguyenvana",
       "email": "nguyenvana@gmail.com",
       "fullName": "Nguyen Van A",
       "phone": "0123456789"
     }
     ```

2. **Láº¥y táº¥t cáº£ Users:**
   - Method: `GET`
   - URL: `http://localhost:8080/api/users`

3. **Láº¥y User theo ID:**
   - Method: `GET`
   - URL: `http://localhost:8080/api/users/1`

4. **Cáº­p nháº­t User:**
   - Method: `PUT`
   - URL: `http://localhost:8080/api/users/1`
   - Headers: `Content-Type: application/json`
   - Body (raw JSON):
     ```json
     {
       "username": "nguyenvana_updated",
       "email": "new.email@gmail.com",
       "fullName": "Nguyen Van A Updated",
       "phone": "0999999999"
     }
     ```

5. **XÃ³a User:**
   - Method: `DELETE`
   - URL: `http://localhost:8080/api/users/1`

## ğŸ¬ Demo Trá»±c Quan

### Video Demo
Xem toÃ n bá»™ quÃ¡ trÃ¬nh test API qua giao diá»‡n web:

![Demo Video](/C:/Users/HPPAVILION/.gemini/antigravity/brain/7dfdaffa-c74f-4a07-be89-73fdc63c9c7a/user_api_demo_1767760504207.webp)

### Screenshot Káº¿t Quáº£
Giao diá»‡n web sau khi cháº¡y demo Ä‘áº§y Ä‘á»§:

![Káº¿t quáº£ demo](/C:/Users/HPPAVILION/.gemini/antigravity/brain/7dfdaffa-c74f-4a07-be89-73fdc63c9c7a/user_api_demo_results_1767760542472.png)


## ğŸ“Š Káº¿t Quáº£ Máº«u

### ThÃªm User ThÃ nh CÃ´ng:
```json
{
  "id": 1,
  "username": "nguyenvana",
  "email": "nguyenvana@gmail.com",
  "fullName": "Nguyen Van A",
  "phone": "0123456789"
}
```

### Danh SÃ¡ch Users:
```json
[
  {
    "id": 1,
    "username": "nguyenvana",
    "email": "nguyenvana@gmail.com",
    "fullName": "Nguyen Van A",
    "phone": "0123456789"
  },
  {
    "id": 2,
    "username": "tranthib",
    "email": "tranthib@gmail.com",
    "fullName": "Tran Thi B",
    "phone": "0987654321"
  }
]
```

## ğŸ” Log Console

Khi báº¡n thá»±c hiá»‡n cÃ¡c thao tÃ¡c, server sáº½ in ra console:
- âœ… User Ä‘Ã£ Ä‘Æ°á»£c táº¡o: User(id=1, username=nguyenvana, ...)
- ğŸ“‹ Danh sÃ¡ch users hiá»‡n táº¡i: [User(id=1, ...), User(id=2, ...)]
- ğŸ” TÃ¬m tháº¥y user: User(id=1, ...)
- ğŸ”„ User Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t: User(id=1, ...)
- ğŸ—‘ï¸ User Ä‘Ã£ Ä‘Æ°á»£c xÃ³a vá»›i ID: 1

## âš ï¸ LÆ°u Ã Quan Trá»ng

> [!WARNING]
> **Dá»¯ liá»‡u sáº½ máº¥t khi restart server!**
> 
> VÃ¬ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trong bá»™ nhá»› RAM, khi báº¡n dá»«ng server (Ctrl+C) hoáº·c restart á»©ng dá»¥ng, **Táº¤T Cáº¢ dá»¯ liá»‡u sáº½ bá»‹ xÃ³a**.

> [!TIP]
> **Khi nÃ o nÃªn dÃ¹ng?**
> - âœ… PhÃ¡t triá»ƒn vÃ  test nhanh
> - âœ… Demo chá»©c nÄƒng cho khÃ¡ch hÃ ng
> - âœ… Há»c táº­p Spring Boot
> - âŒ KHÃ”NG dÃ¹ng cho production
> - âŒ KHÃ”NG dÃ¹ng khi cáº§n lÆ°u trá»¯ lÃ¢u dÃ i

## ğŸ“ Kiáº¿n Thá»©c Bá»• Sung

### Táº¡i sao khÃ´ng cáº§n Database?

1. **LÆ°u trá»¯ trong bá»™ nhá»›:** Sá»­ dá»¥ng `ArrayList` Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u
2. **Nhanh chÃ³ng:** KhÃ´ng cáº§n cÃ i Ä‘áº·t MySQL, PostgreSQL, etc.
3. **ÄÆ¡n giáº£n:** KhÃ´ng cáº§n viáº¿t SQL queries
4. **PhÃ¹ há»£p cho há»c táº­p:** Táº­p trung vÃ o logic nghiá»‡p vá»¥

### NÃ¢ng cáº¥p lÃªn Database tháº­t

Khi cáº§n lÆ°u trá»¯ dá»¯ liá»‡u lÃ¢u dÃ i, báº¡n cÃ³ thá»ƒ:
1. ThÃªm dependency JPA/Hibernate vÃ o [pom.xml](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/pom.xml)
2. ThÃªm annotation `@Entity` vÃ o class [User](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/src/main/java/com/example/demo/model/User.java#7-17)
3. Thay [UserService](file:///c:/Users/HPPAVILION/Downloads/Backend/Web_shop/src/main/java/com/example/demo/service/UserService.java#10-53) báº±ng `UserRepository extends JpaRepository`
4. Cáº¥u hÃ¬nh database trong `application.properties`

## ğŸ‰ Káº¿t Luáº­n

Báº¡n Ä‘Ã£ cÃ³ má»™t há»‡ thá»‘ng User API hoÃ n chá»‰nh mÃ  **khÃ´ng cáº§n cÃ i Ä‘áº·t database**! Há»‡ thá»‘ng nÃ y:
- âœ… Cháº¡y ngay láº­p tá»©c
- âœ… CÃ³ Ä‘áº§y Ä‘á»§ chá»©c nÄƒng CRUD
- âœ… CÃ³ giao diá»‡n web Ä‘áº¹p Ä‘á»ƒ test
- âœ… In ra console Ä‘á»ƒ debug dá»… dÃ ng
- âœ… PhÃ¹ há»£p cho há»c táº­p vÃ  demo

ChÃºc báº¡n code vui váº»! ğŸš€
